version: 0.2

phases:
  install:
    runtime-versions:
      python: 3.10
    commands:
      - echo "Instalando dependÃªncias..."
      - pip install -r app/requirements.txt
      - pip install pytest jsonschema
  build:
    commands:
      - echo "========== INICIANDO TESTES =========="
      - export PYTHONPATH=app

      - echo "ðŸ”¹ Executando testes unitÃ¡rios..."
      - pytest app/test_app.py 

      - echo "ðŸ”¹ Executando testes de integraÃ§Ã£o..."
      - pytest app/test_integracao.py

      - echo "ðŸ”¹ Executando testes de contrato..."
      - pytest app/test_contrato.py

      - echo "ðŸ”¹ Executando testes de validaÃ§Ã£o de erro..."
      - pytest app/test_erros.py

      - echo "ðŸ”¹ Executando testes de vunerabildiade de codigo pyhton"
      - bandit -r app/ || true  
      - echo "âœ… Todos os testes foram executados."
artifacts:
  files:
    - '**/*'

